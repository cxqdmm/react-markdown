(this["webpackJsonpreact-markdown"]=this["webpackJsonpreact-markdown"]||[]).push([[0],{26:function(e,t){e.exports="<p>\u8fd9\u4e2a\u535a\u5ba2\u4e3b\u8981\u7528\u6765\u8bb0\u5f55 react \u5b66\u4e60\u4e2d\u9047\u5230\u7684\u70b9\u70b9\u6ef4\u6ef4\uff0c\u5de9\u56fa\u77e5\u8bc6\u70b9\u3002</p> <hr> "},27:function(e,t){e.exports='<h1 id="useeffect\u3001uselayouteffect">useEffect\u3001useLayoutEffect</h1> <hr> <p>useEffect \u7684\u4f5c\u7528\u548c componentDidMount \u4ee5\u53ca componentDidUpdate \u6709\u70b9\u7c7b\u4f3c\uff0c\u53ea\u4e0d\u8fc7 useEffect \u7684\u7c92\u5ea6\u66f4\u7ec6\uff0c\u53ef\u4ee5\u5728 useEffect \u4e2d\u63a7\u5236\u4e00\u4e2a\u6d41\u7a0b\u7684\u53d1\u8d77\u548c\u9500\u6bc1\u3002\u5177\u4f53\u7528\u6cd5\u53ef\u4ee5\u67e5\u770b<a href="https://zh-hans.reactjs.org/docs/hooks-effect.html">\u5b98\u7f51</a>,\u8fd9\u91cc\u4e3b\u8981\u8ba8\u8bba\u4e0b useEffect \u548c componentDidMount/componentDidUpdate \u7684\u533a\u522b \u4ee5\u53ca useEffect \u548c useLayoutEffect \u7684\u533a\u522b\u3002</p> <h2 id="useeffect-vs-componentdidmountcomponentdidupdate">useEffect vs componentDidMount/componentDidUpdate</h2> <p>componentDidMount \u662f class \u7ec4\u4ef6\u521d\u6b21\u6e32\u67d3\u7ed3\u675f\u65f6\u6267\u884c\u7684\u751f\u547d\u5468\u671f\u51fd\u6570\uff0c\u662f\u5728 react \u7684 commit \u9636\u6bb5\uff0c\u7d27\u63a5\u7740\u7ec4\u4ef6\u6e32\u67d3\u5b8c\u540e\u6267\u884c\u7684\uff0c\u4f1a\u963b\u585e\u6d4f\u89c8\u5668\u7684\u6e32\u67d3\uff0c\u5982\u679c\u5728\u5176\u4e2d\u6267\u884c\u8017\u65f6\u7684\u4efb\u52a1\uff0c\u90a3\u5728\u8017\u65f6\u4efb\u52a1\u7ed3\u675f\u524d\uff0c\u9875\u9762\u662f\u770b\u4e0d\u5230\u66f4\u65b0\u7684\uff0ccomponentDidUpdate \u548c componentDidMount \u7684\u884c\u4e3a\u5dee\u4e0d\u591a\uff0c\u53ea\u662f\u6267\u884c\u7684\u65f6\u673a\u4e0d\u662f\u521d\u6b21\u6e32\u67d3\u3002</p> <p>useEffect \u6709\u4e09\u4e2a\u91cd\u8981\u7684\u7ec4\u6210\uff0c\u5904\u7406\u51fd\u6570\u3001\u4f9d\u8d56\u3001\u9500\u6bc1\u51fd\u6570\uff08\u5904\u7406\u51fd\u6570\u8fd4\u56de\u7684\u51fd\u6570\uff09\uff0c\u6bcf\u5f53\u4f9d\u8d56\u53d1\u751f\u53d8\u5316\u90fd\u4f1a\u5148\u6267\u884c\u4e0a\u4e00\u6b21\u751f\u6210\u7684\u9500\u6bc1\u51fd\u6570\u518d\u6267\u884c\u65b0\u7684\u5904\u7406\u51fd\u6570\u3002</p> <p><strong>useEffect \u4e0d\u4f1a\u963b\u585e\u6d4f\u89c8\u5668\u7684\u6e32\u67d3</strong>\uff0c\u56e0\u4e3a useEffect \u662f\u7b49\u5230 commit \u5b8c\u6210\u540e\uff0c\u518d\u5728\u53e6\u4e00\u4e2a\u5b8f\u4efb\u52a1\u4e2d\u6267\u884c\u7684\uff0c\u8fd9\u4e2a\u5b8f\u4efb\u52a1\u662f\u901a\u8fc7 messageChannel \u7684 postMessage \u89e6\u53d1\u7684 j \u5177\u4f53\u7ec6\u8282\u53ef\u67e5\u770b react schedule \u6a21\u5757\u7684\u5b9e\u73b0\u3002</p> <h2 id="useeffect-vs-uselayouteffect">useEffect vs useLayoutEffect</h2> <p>\u4e8b\u5b9e\u4e0a\u767e\u5206\u4e4b 99%\u7684\u573a\u666f\u4f7f\u7528 useEffect \u548c useLayoutEffect \u7684\u6548\u679c\u662f\u4e00\u6837\u7684, \u4e0d\u540c\u70b9\u662f\uff0cuseLayoutEffect \u7684\u8868\u73b0\u548c componentDidUpdate \u4e00\u6837\uff0c\u4f1a\u963b\u585e\u6d4f\u89c8\u5668\u7684\u6e32\u67d3,\u5177\u4f53\u53ef\u53c2\u8003<a href="https://codesandbox.io/s/useeffect-vs-uselayouteffect-gtvim">useEffect</a>,\u53ef\u4ee5\u53d1\u73b0\u4f7f\u7528 useEffect \u65f6\u7ea2\u8272\u6570\u5b57 1 \u4f1a\u4e00\u95ea\u800c\u8fc7\uff0cuseLayoutEffect \u4e0d\u4f1a\u51fa\u73b0\u8fd9\u79cd\u73b0\u8c61\u3002</p> <p><img src="/react-markdown/assets/useEffect.png" alt="github" width="80%" style="margin:auto;display:block"></p> '},28:function(e,t){e.exports=""},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(25),o=n.n(r),u=n(26),l=n.n(u),i=n(27),s=n.n(i),m=n(7),f=n(6),d=n.n(f),p=c.a.memo((function(e){var t=e.className,n=Object(a.useState)(0),r=Object(m.a)(n,2),o=r[0],u=r[1];Object(a.useEffect)((function(){return console.log(o),function(){console.log("unmount effect")}}),[o]);var l=Object(a.useCallback)((function(){u(o+1)}),[o]);return c.a.createElement("div",{className:d()("".concat("useEffectView"),t),onClick:l},o)})),E=n(28),h=n.n(E),v=n(32),b=n(9),g=n(10);function j(){var e=Object(b.a)(["\n  font-size: 12px;\n  background-color: #e6ecf1;\n  padding: 4px 8px;\n  cursor: pointer;\n  line-height: 12px;\n  font-weight: 600;\n  user-select: none;\n"]);return j=function(){return e},e}function x(){var e=Object(b.a)(["\n  font-size: 24px;\n  margin-bottom: 8px;\n  font-weight: 600;\n"]);return x=function(){return e},e}function O(){var e=Object(b.a)(["\n  font-size: 20px;\n  margin-bottom: 8px;\n  font-weight: 600;\n"]);return O=function(){return e},e}function y(){var e=Object(b.a)(["\n  font-size: 16px;\n  margin-bottom: 8px;\n  font-weight: 600;\n"]);return y=function(){return e},e}function w(){var e=Object(b.a)(["\n  border: 1px solid #e6ecf1;\n  padding: 16px 20px;\n  margin: 10px 0;\n"]);return w=function(){return e},e}function N(){var e=Object(b.a)(["\n  background-color: #f4f9fe;\n  padding: 16px 20px 0 20px;\n  margin: 10px 0;\n"]);return N=function(){return e},e}var C=g.a.div(N()),R=g.a.div(w()),k=g.a.div(y()),D=g.a.div(O()),M=g.a.div(x()),L=g.a.div(j()),S=c.a.memo((function(e){var t=e.children,n=Object(a.useState)(!1),r=Object(m.a)(n,2),o=r[0],u=r[1],l=Object(a.useCallback)((function(){u((function(e){return!e}))}),[]);return c.a.createElement("div",{style:{position:"relative",borderTop:"2px solid #e6ecf1",padding:"10px"}},c.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",height:"20px",textAlign:"right",fontSize:"12px",lineHeight:"20px"},onClick:l},c.a.createElement(k,null,"\u7ed3\u8bba"),c.a.createElement(L,null,o?"\u6536\u8d77":"\u5c55\u5f00")),o&&c.a.createElement("div",{style:{padding:"16px 20px"}},t))})),z=c.a.createContext({count:""}),P=c.a.memo((function(e){var t=Object(a.useState)("1"),n=Object(m.a)(t,2),r=n[0],o=n[1],u=Object(a.useState)(""),l=Object(m.a)(u,2),i=l[0],s=l[1];return c.a.createElement(C,null,c.a.createElement(z.Provider,{value:{count:r}},c.a.createElement(M,null,"\u573a\u666f1: \u9a8c\u8bc1\u5728\u4ec0\u4e48\u60c5\u51b5\u63a5\u6536\u4eba\u4f1a\u54cd\u5e94\u66f4\u65b0"),c.a.createElement("div",null,c.a.createElement("span",null,"name\uff1a"),c.a.createElement("input",{value:i,onChange:function(e){s(e.target.value)}})),c.a.createElement(R,null,c.a.createElement(D,null,"context\u63d0\u4f9b\u7684\u6570\u636e"),c.a.createElement("span",null,"count\uff1a"),c.a.createElement("input",{value:r,onChange:function(e){o(e.target.value)}})),c.a.createElement(U,null)),c.a.createElement(S,null,"context\u5c5e\u6027\u7684\u503c\u6216\u8005\u5f15\u7528\u53d8\u4e86\uff0c\u63a5\u6536\u8005\u624d\u80fd\u62ff\u5230\u66f4\u65b0"))})),U=c.a.memo((function(e){var t=Object(a.useContext)(z).count,n=Object(a.useState)([]),r=Object(m.a)(n,2),o=r[0],u=r[1];return Object(a.useEffect)((function(){u((function(e){return e.push("receiver rendered count: ".concat(t)),Object(v.a)(e)}))}),[t]),c.a.createElement(R,null,c.a.createElement(D,null,"\u6211\u662f\u63a5\u6536\u4eba"),"\u6536\u5230\u7684count\uff1a",t,o.map((function(e){return c.a.createElement("div",null,e)})))})),B=c.a.memo((function(e){return c.a.createElement("div",null,c.a.createElement(P,null))})),T=n(13),H=n(1),I=n(21),J=n(11),V=function e(t,n){if(t&&(null===n||void 0===n?void 0:n.length)){var a=Object(J.find)(n,(function(e){return e.path===(null===t||void 0===t?void 0:t.lastChildRoutePath)}))||n[0];return e(a,a.children)}return(null===t||void 0===t?void 0:t.path)||""},_=c.a.memo((function(e){var t=e.route,n=e.routes,a=(e.location||{}).pathname,r=V(t,n);return r!==a?c.a.createElement(H.a,{to:r||ee}):c.a.createElement(H.a,{to:ee})})),A=function e(t,n,a){var r=n?c.a.createElement(H.d,null,Object(J.map)(n,(function(n,a){return e(n,n.children,t)})),c.a.createElement(_,{routes:n,route:t})):null;return c.a.createElement(q,Object.assign({childrenRender:r},t,{route:t,parentRoute:a,childRoutes:n}))},q=c.a.memo((function(e){var t=e.childrenRender,n=e.route,a=e.parentRoute,r=e.childRoutes,o=e.layout,u=e.layoutProps,l=(e.children,e.component),i=Object(I.a)(e,["childrenRender","route","parentRoute","childRoutes","layout","layoutProps","children","component"]);return a&&!a.ignoreCache&&(a.lastChildRoutePath=null===n||void 0===n?void 0:n.path),n?!r&&l?o?c.a.createElement(F,Object.assign({},i,{render:function(){return c.a.createElement(o,Object.assign({route:n},u),c.a.createElement(l,i))}})):c.a.createElement(F,Object.assign({},i,{render:function(){return c.a.createElement(l,i)}})):r&&o?c.a.createElement(F,Object.assign({},i,{render:function(){return c.a.createElement(o,Object.assign({childRoutes:r,route:n},u),t)}})):t:t})),F=function(e){var t=e.render,n=Object(I.a)(e,["render"]);return c.a.createElement(H.b,Object.assign({},n,{render:t}))},G=(n(47),n(48),"Mavigator"),K=c.a.memo((function(e){var t=e.className,n=e.childRoutes,r=function(e){var t=Object(H.g)(),n=Object(a.useMemo)((function(){return Object(J.find)(e,(function(e){return t.pathname.includes(e.path)}))}),[t.pathname,e]);return null===n||void 0===n?void 0:n.path}(n);return c.a.createElement("div",{className:d()("".concat(G),t)},n.map((function(e){return r===e.path?c.a.createElement("span",{className:d()("".concat(G,"-item"),"is-active")},e.name,c.a.createElement("div",{className:"".concat(G,"-activeBar")})):c.a.createElement(T.b,{className:d()("".concat(G,"-item")),key:e.path,to:e.path},e.name,c.a.createElement("div",{className:"".concat(G,"-activeBar")}))})))})),Q="Layout",W=c.a.memo((function(e){var t=e.title,n=e.childRoutes,a=e.children;return c.a.createElement("div",{className:d()("".concat(Q))},c.a.createElement("div",{className:"".concat(Q,"-head")},c.a.createElement("span",{className:"".concat(Q,"-headTitle")},t)),c.a.createElement("div",{className:"".concat(Q,"-body")},c.a.createElement("div",{className:"".concat(Q,"-bodyLeft")},c.a.createElement(K,{childRoutes:n})),c.a.createElement("div",{className:"".concat(Q,"-bodyRight")},a)))})),X=(n(49),"MdView"),Y=c.a.memo((function(e){var t=e.className,n=e.md;e.view;return c.a.createElement("div",{className:d()("".concat(X),t)},!1,c.a.createElement("div",{className:"".concat(X,"-md"),dangerouslySetInnerHTML:{__html:n}}))})),Z="/react-markdown";function $(e){return"".concat(Z).concat(e)}var ee=$("/home"),te=[{path:Z,layout:W,layoutProps:{title:"react \u89e3\u6790"},ignoreCache:!0,children:[{path:ee,name:"home",component:function(){return c.a.createElement(Y,{md:l.a})}},{path:$("/useEffect"),name:"useEffect",component:function(){return c.a.createElement(Y,{md:s.a,view:c.a.createElement(p,null)})}},{path:$("/useContext"),name:"useContext",component:function(){return c.a.createElement(Y,{md:h.a,view:c.a.createElement(B,null)})}}]}],ne=function(){return c.a.createElement(T.a,null,c.a.createElement(H.d,null,A(void 0,te),c.a.createElement(H.a,{to:ee})))},ae=(n(50),c.a.memo((function(e){return c.a.createElement(ne,null)})));o.a.render(c.a.createElement(ae,null),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.617c45f6.chunk.js.map