{"version":3,"sources":["md/home/index.md","md/useEffect/index.md","router/util.ts","router/routeWithLayout.tsx","components/Layout/Navigator/index.tsx","components/Layout/index.tsx","components/MdView/index.tsx","router/index.tsx","App.tsx","index.tsx"],"names":["module","exports","recoverPath","currentRoute","childRoutes","length","nextRoute","find","route","path","lastChildRoutePath","children","RedirectRoute","React","memo","routes","pathname","location","redirectUrl","to","renderRouterWithChildren","parentRoute","childrenRender","map","child","index","CustomerRoute","props","Layout","layout","layoutProps","RouterComponent","component","restProps","ignoreCache","render","PrivateRoute","rest","PREFIX","Mavigator","className","matchedPath","routers","useLocation","router","useMemo","includes","useRouterPathMatch","cls","name","key","title","MdView","md","dangerouslySetInnerHTML","__html","home","useEffect","RootRouter","undefined","App","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.9098c66e.chunk.js","sourcesContent":["// Module\nvar code = \"<h1 id=\\\"我是主页\\\">我是主页</h1> \";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<h1 id=\\\"1231312\\\">1231312</h1> \";\n// Exports\nmodule.exports = code;","import { IRoute } from './interface';\nimport { find } from 'lodash';\n\nexport const recoverPath: (currentRoute?: IRoute, childRoutes?: IRoute[]) => string = (\n  currentRoute,\n  childRoutes,\n) => {\n  if (currentRoute && childRoutes?.length) {\n    const matchedChildRoute = find(\n      childRoutes,\n      (route) => route.path === currentRoute?.lastChildRoutePath,\n    );\n\n    const nextRoute = matchedChildRoute || childRoutes[0];\n    return recoverPath(nextRoute, nextRoute.children);\n  }\n  return currentRoute?.path || '';\n};\n","import { IRoute } from './interface';\nimport { Redirect, Route, RouteComponentProps, RouteProps, Switch } from 'react-router-dom';\nimport { map } from 'lodash';\nimport { recoverPath } from './util';\nimport React from 'react';\n\ntype IRouteWithLayoutProps = Omit<RouteProps, 'component' | 'render' | 'children'> & {\n  childrenRender: React.ReactNode;\n  childRoutes?: IRoute[];\n  parentRoute?: IRoute;\n  route?: IRoute;\n} & Partial<IRoute>;\n\nconst RedirectRoute: React.FC<\n  Partial<RouteComponentProps> & {\n    routes?: IRoute[];\n    route?: IRoute;\n  }\n> = React.memo(function ({ route, routes, location }) {\n  const { pathname } = location || {};\n  const redirectUrl = recoverPath(route, routes);\n  if (redirectUrl !== pathname) {\n    return <Redirect to={redirectUrl} />;\n  }\n  return <Redirect to=\"/home\" />;\n});\n\nexport const renderRouterWithChildren = (\n  route: IRoute | undefined,\n  children?: IRoute[],\n  parentRoute?: IRoute,\n) => {\n  const childrenRender = children ? (\n    <Switch>\n      {map(children, (child, index) => {\n        return renderRouterWithChildren(child, child.children, route);\n      })}\n      <RedirectRoute routes={children} route={route} />\n    </Switch>\n  ) : null;\n\n  return (\n    <CustomerRoute\n      childrenRender={childrenRender}\n      {...route}\n      route={route}\n      parentRoute={parentRoute}\n      childRoutes={children}\n    />\n  );\n};\n\nconst CustomerRoute: React.FC<IRouteWithLayoutProps> = React.memo(function CustomerRoute(props) {\n  const {\n    childrenRender,\n    route,\n    parentRoute,\n    childRoutes,\n    layout: Layout,\n    layoutProps,\n    children,\n    component: RouterComponent,\n    ...restProps\n  } = props;\n\n  if (parentRoute && !parentRoute.ignoreCache) {\n    parentRoute.lastChildRoutePath = route?.path;\n  }\n  if (!route) {\n    return childrenRender as React.ReactElement;\n  }\n\n  if (!childRoutes) {\n    if (RouterComponent) {\n      if (Layout) {\n        return (\n          <PrivateRoute\n            {...restProps}\n            render={() => (\n              <Layout route={route} {...layoutProps}>\n                <RouterComponent {...restProps} />\n              </Layout>\n            )}\n          />\n        );\n      }\n      return <PrivateRoute {...restProps} render={() => <RouterComponent {...restProps} />} />;\n    }\n  }\n\n  if (childRoutes) {\n    if (Layout) {\n      return (\n        <PrivateRoute\n          {...restProps}\n          render={() => (\n            <Layout childRoutes={childRoutes} route={route} {...layoutProps}>\n              {childrenRender}\n            </Layout>\n          )}\n        />\n      );\n    }\n  }\n  return childrenRender as React.ReactElement;\n});\ntype PrivateRouteProps = Required<Pick<RouteProps, 'render'>> &\n  Omit<RouteProps, 'component' | 'render'>;\nexport const PrivateRoute = ({ render, ...rest }: PrivateRouteProps) => {\n  return <Route {...rest} render={render} />;\n};\n","import { Link } from 'react-router-dom';\nimport { find } from 'lodash';\nimport { useLocation } from 'react-router';\nimport React, { useMemo } from 'react';\nimport cls from 'classnames';\nimport './index.less';\nimport { IRoute } from '../../../router/interface';\n\nconst PREFIX = 'Mavigator';\n\ninterface IProps {\n  className?: string;\n  childRoutes: IRoute[];\n}\n\nconst useRouterPathMatch = (routers: IRoute[]) => {\n  const location = useLocation();\n  const router = useMemo(() => {\n    return find(routers, (router) => location.pathname.includes(router.path));\n  }, [location.pathname, routers]);\n  return router?.path;\n};\n\nconst Mavigator: React.FC<IProps> = React.memo(function AppThirdNavigator(props) {\n  const { className, childRoutes } = props;\n  const matchedPath = useRouterPathMatch(childRoutes);\n\n  return (\n    <div className={cls(`${PREFIX}`, className)}>\n      {childRoutes.map((router) =>\n        matchedPath === router.path ? (\n          <span className={cls(`${PREFIX}-item`, 'is-active')}>\n            {router.name}\n            <div className={`${PREFIX}-activeBar`} />\n          </span>\n        ) : (\n          <Link className={cls(`${PREFIX}-item`)} key={router.path} to={router.path}>\n            {router.name}\n            <div className={`${PREFIX}-activeBar`} />\n          </Link>\n        ),\n      )}\n    </div>\n  );\n});\n\nexport default Mavigator;\n","import React from 'react';\nimport cls from 'classnames';\nimport './index.less';\nimport { IRoute } from '../../router/interface';\nimport Mavigator from './Navigator';\n\nconst PREFIX = 'Layout';\n\ninterface IProps {\n  title?: React.ReactNode;\n  route?: IRoute;\n  childRoutes: IRoute[];\n}\n\nconst Layout: React.FC<IProps> = React.memo(function Layout(props) {\n  const { title, childRoutes, children } = props;\n  return (\n    <div className={cls(`${PREFIX}`)}>\n      <div className={`${PREFIX}-head`}>\n        <span className={`${PREFIX}-headTitle`}>{title}</span>\n      </div>\n      <div className={`${PREFIX}-body`}>\n        <div className={`${PREFIX}-bodyLeft`}>\n          <Mavigator childRoutes={childRoutes} />\n        </div>\n        <div className={`${PREFIX}-bodyRight`}>{children}</div>\n      </div>\n    </div>\n  );\n});\n\nexport default Layout;\n","import React from 'react';\nimport cls from 'classnames';\n\nconst PREFIX = 'MdView';\n\ninterface IProps {\n  className?: string;\n  md: string;\n}\n\nconst MdView: React.FC<IProps> = React.memo(function MdView(props) {\n  const { className, md } = props;\n  return (\n    <div className={cls(`${PREFIX}`, className)}>\n      <div dangerouslySetInnerHTML={{ __html: md }}></div>\n    </div>\n  );\n});\n\nexport default MdView;\n","import home from '../md/home/index.md';\nimport useEffect from '../md/useEffect/index.md';\nimport { Switch, Redirect, BrowserRouter } from 'react-router-dom';\nimport { renderRouterWithChildren } from './routeWithLayout';\nimport Layout from '../components/Layout';\nimport React from 'react';\nimport MdView from '../components/MdView';\nimport { IRoute } from './interface';\nconst routes: IRoute[] = [\n  {\n    path: '/',\n    layout: Layout,\n    layoutProps: { title: 'react 解析' },\n    ignoreCache: true,\n    children: [\n      {\n        path: '/home',\n        name: 'home',\n        component: () => <MdView md={home} />,\n      },\n      {\n        path: '/useEffect',\n        name: 'useEffect',\n        component: () => <MdView md={useEffect} />,\n      },\n    ],\n  },\n];\n\nconst RootRouter = () => {\n  return (\n    <BrowserRouter>\n      <Switch>\n        {renderRouterWithChildren(undefined, routes)}\n        <Redirect to=\"/home\" />\n      </Switch>\n    </BrowserRouter>\n  );\n};\n\nexport default RootRouter;\n","import React from 'react';\nimport RootRouter from './router';\nimport './index.less';\n\nconst App: React.FC = React.memo(function App(props) {\n  return <RootRouter />;\n});\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}